<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>컬러픽커</title>
    <style>
      section {
        background-color: teal;
      }
    </style>
  </head>
  <body>
    <header>
      <label for="txt-color">글씨 색 선택</label
      ><input id="txt-color" type="color" />
      <label for="bg-color">배경 색 선택</label
      ><input id="bg-color" type="color" />
    </header>
    <section class="section">
      <p class="p">
        Lorem ipsum dolor sit amet consectetur adipisicing elit. Dolores
        laboriosam atque illo possimus nihil labore, et consectetur facilis
        inventore tempora temporibus officia maiores omnis voluptatum rem, ex
        est explicabo accusantium?
      </p>
    </section>

    <script>
      const section = document.querySelector(".section");
      const p = document.querySelector(".p");

      const txtColor = document.querySelector("#txt-color");
      const bgColor = document.querySelector("#bg-color");

      function throttle(callback, delay) {
        let changeValue;
        return (event) => {
          if (changeValue) return;
          changeValue = setTimeout(
            () => {
              callback(event);
              changeValue = null;
            },
            delay,
            event
          );
        };
      }

      function changeTxtColor() {
        p.style.color = txtColor.value;
        txtCount++;
      }

      function changeBgColor() {
        section.style.backgroundColor = bgColor.value;
        bgCount++;
      }
      let txtCount = 0;
      txtColor.addEventListener("input", throttle(changeTxtColor, 100));
      let bgCount = 0;
      bgColor.addEventListener("input", changeBgColor);

      setInterval(() => {
        console.log(txtCount, bgCount);
      }, 2000);
    </script>
  </body>
</html>
