<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>달력</title>
    <style>
        #calendar {
            padding:20px;
            background-color: #333;
            text-align: center;
            color:white;

        }
        table{
            margin: 0 auto;
            border-collapse: collapse;
        }
        caption {
            font-size: 25px;
            color:orange;
            margin: 10px;

        }

        th,td {
            width: 30px;
            padding: 10px;
            border: 1px solid #666;

            border-collapse: collapse;                        
        }

        th:first-child, td:first-child{
            color:red;
        }

        .prev,.next {
            color: inherit;
            padding: 10px;
            margin: 5px;
            background-color: #333;
        }
    </style>
</head>
<body>
    <article id="calendar">
        <h2>HTML 달력</h2>
        <table style="margin: 0 auto">
            <caption>
              <time datetime="2022-11">
                <span class="year"></span>년   
                <span class="month"></span>월  
              </time>
            </caption>

            <tr>
                <th>일</th>
                <th>월</th>
                <th>화</th>
                <th>수</th>
                <th>목</th>
                <th>금</th>
                <th>토</th>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
            <tr>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
               <td></td>
            </tr>
        </table>

        <button type="button" class="prev">이전달</button>
        <button type="button" class="next">다음달</button>
    </article>

    <script>
        function calendar(newYear, newMonth) {
            const time = new Date(newYear, newMonth-1, 1);
            // 어려운 방법
            // const timeLength = 32 - new Date(newYear, newMonth-1, 31).getDate();

            const timeLength = new Date(newYear, newMonth, 0).getDate();

            let year = time.getFullYear();
            let month = time.getMonth()
            let date = time.getDate()
            let day = time.getDay()

            const captionYear = document.querySelector('.year');
            const captionMonth = document.querySelector('.month');
            const timeEl = document.querySelector('time');
            const days = document.querySelectorAll('tr td');

            for(let i =0; i<days.length; i++){
                days[i].innerHTML = `&nbsp;`;
            }

            for (let i = day; i< day + timeLength; i++){
                days[i].textContent = date++;
            }
            console.log(month);
            captionYear.textContent = year;
            captionMonth.textContent = month+1 ;
            timeEl.datetime = `${year}-${month}`
        }
        let year = new Date().getFullYear(),
         month = new Date().getMonth() +1;

        calendar(2022,11);

        const btns = document.querySelectorAll('button');

        btns.forEach((item)=> {
            item.addEventListener('click', ()=> {
                item.classList.contains('prev') ? calendar(year, --month) : calendar(year, ++month)
            })
        })

    </script>
</body>
</html>